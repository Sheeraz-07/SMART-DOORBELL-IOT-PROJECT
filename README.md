# SMART-DOORBELL-IOT-PROJECT
# Smart Doorbell with Face Recognition

A smart doorbell system that uses face recognition to identify visitors, trigger hardware actions (OLED display and buzzer), and log events to a Firebase database. The system consists of an ESP32-CAM module for image capture, a Python Flask server for face recognition, and a web dashboard for monitoring.

---

## Features

- **Real-time Face Recognition:** Detects and recognizes faces from images sent by the ESP32-CAM.
- **Web Dashboard:** View the latest and historical detected faces via a modern, responsive web interface.
- **Hardware Integration:** Displays recognized names on an OLED and triggers a buzzer (different patterns for known/unknown faces).
- **Firebase Logging:** Logs each recognition event (image, label, confidence, timestamp) to a Firebase Realtime Database.
- **Easy Model Training:** Train your own SVM face recognition model using your dataset.

---

## Directory Structure

```
SMART_DOORBELL_GITHUB_DIRECTORY/
│
├── app.py                      # Main Flask server with face recognition and Firebase integration
├── hardware.py                 # OLED and buzzer control logic (Raspberry Pi/compatible)
├── train_model.py              # Script to train the SVM face recognition model
├── utils.py                    # Face embedding and image loading utilities
│
├── dataset/                    # Training images (subfolders per person)
│   ├── label/                  # Example: known person images
│   └── unknown/                # Example: unknown faces
│
├── embeddings/
│   └── face_embeddings.pkl     # Saved face embeddings (generated by training)
│
├── models/
│   └── svm_classifier.pkl      # Trained SVM model
│
├── static/
│   └── received_images/        # Images received from ESP32-CAM (for dashboard)
│
├── templates/
│   └── index.html              # Web dashboard template
│
├── fast_speed_updated/
│   └── fast_speed_updated.ino  # ESP32-CAM firmware (C++/Arduino)
│
├── requirementP.txt            # Python dependencies
├── requirementC.txt            # ESP32-CAM (C++) dependencies
```

---

## Hardware Requirements

- **ESP32-CAM** (AI Thinker or compatible)
- **Raspberry Pi** (or any Linux SBC with I2C and GPIO for OLED/buzzer)
- **0.96" I2C OLED Display** (SSD1306)
- **Buzzer** (connected to GPIO)
- **Wi-Fi Network**

---

## Software Requirements

### Python (Server Side)

Install dependencies:

```bash
pip install -r requirementP.txt
```

Contents of `requirementP.txt` include:
- flask
- requests
- numpy
- opencv-python
- face_recognition
- scikit-learn
- pillow
- adafruit-circuitpython-ssd1306
- adafruit-blinka
- adafruit-circuitpython-busdevice

### ESP32-CAM (Client Side)

- Arduino IDE with ESP32 board support
- Libraries listed in `requirementC.txt`:
  - esp_camera.h
  - WiFi.h
  - WiFiClientSecure.h
  - HTTPClient.h
  - ESPmDNS.h

---

## Setup & Usage

### 1. Train the Face Recognition Model

- Place training images in `dataset/`, with one subfolder per person (e.g., `dataset/Alice/`, `dataset/Bob/`).
- Run the training script:

```bash
python train_model.py
```

This will generate `models/svm_classifier.pkl` and `embeddings/face_embeddings.pkl`.

---

### 2. Flash the ESP32-CAM

- Open `fast_speed_updated/fast_speed_updated.ino` in Arduino IDE.
- Set your Wi-Fi credentials and server hostname/port if needed.
- Flash to your ESP32-CAM.

---

### 3. Start the Flask Server

```bash
python app.py
```

- The server will listen on port 5000.
- Access the dashboard at `http://<server-ip>:5000/`.

---

### 4. Hardware Integration

- Connect the OLED display and buzzer to your Raspberry Pi as per the pin configuration in `hardware.py`.
- The server will automatically display recognized names and buzz accordingly.

---

### 5. Firebase Integration

- The server pushes each recognition event to your Firebase Realtime Database.
- Update the `FIREBASE_HOST` and `FIREBASE_AUTH` in `app.py` with your own Firebase project details.

---

## How It Works

1. **ESP32-CAM** captures an image every 5 seconds and POSTs it to the Flask server.
2. **Flask Server**:
   - Extracts face embeddings.
   - Predicts the label using the SVM model.
   - Saves the image and logs the event to Firebase.
   - Triggers hardware actions (OLED/buzzer).
3. **Web Dashboard** displays the latest and historical recognized faces.

---

## Customization

- **Add new users:** Add more folders with images in `dataset/` and retrain the model.
- **Change hardware pins:** Edit `hardware.py` for Raspberry Pi or `fast_speed_updated.ino` for ESP32-CAM.
- **Change Firebase project:** Update credentials in `app.py`.

---

## License

MIT License

---

## Credits

- Face recognition powered by [face_recognition](https://github.com/ageitgey/face_recognition)
- Hardware libraries by Adafruit and Espressif
